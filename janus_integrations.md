# What needs to be added for Janus
- [ ] Janus remote setup script
  - [ ] Install Janus and dependencies
  - [x] Args should include:
    - [x] Commit hash
    - [x] Janus server username
    - [x] Janus server IP
    - [x] Target directory
  - [x] Build the docker image and name it ubivision-janus
  - [x] Check if the Janus server is running
    - [x] If it is, stop it
    - [x] Remove the Janus docker container
    - [x] Run the new Janus docker container
  - [ ] Start running the update janus server python script
- [ ] update-janus.py script
  - [ ] Args should include:
    - [ ] Janus server username
    - [ ] Janus server IP
    - [ ] Janus server password
    - [ ] Janus server directory
    - [ ] Janus server commit hash
  - [ ] Ensure the poetry environment is activated
    - [ ] If it is not, activate it
  - [ ] The script should:
    - [ ] Use the cluster-server API to get the list of all active cameras
    - [ ] For each camera, check if the camera is already in the Janus server
      - [ ] If it is not:
        - [ ] Find the next available port
        - [ ] Add the camera to the Janus server template file
        - [ ] Expose the port in the Dockerfile
        - [ ] Build the docker image
        - [ ] Run the docker container
      - [ ] If it is, do nothing
    - [ ] Check if a camera is still active
      - [ ] If it is not:
        - [ ] Remove the camera from the Janus server template file
        - [ ] Remove the camera port from the Dockerfile
        - [ ] Restart the docker container
      - [ ] If it is, do nothing